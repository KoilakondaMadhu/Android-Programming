package com.example.hi.googlemaptest;
import android.Manifest;
import android.content.Context;
import android.content.pm.PackageManager;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.support.v4.app.ActivityCompat;
import android.support.v4.content.ContextCompat;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.widget.TextView;
import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.OnMapReadyCallback;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.MarkerOptions;
import org.w3c.dom.Text;
public class MainActivity extends AppCompatActivity {
 SupportMapFragment smFragment;
 TextView latitude, longitude;
 @Override
 protected void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.activity_main);
 latitude=(TextView)findViewById(R.id.tv_latitude);
 longitude=(TextView)findViewById(R.id.tv_longitude);
 int coarse_loc_status=
 ContextCompat.checkSelfPermission(MainActivity.this,
 Manifest.permission.ACCESS_COARSE_LOCATION);
 int fine_loc_status=ContextCompat.checkSelfPermission(MainActivity.this,
 Manifest.permission.ACCESS_FINE_LOCATION);
 if(coarse_loc_status== PackageManager.PERMISSION_GRANTED &&
 fine_loc_status==PackageManager.PERMISSION_GRANTED) {
 }
 else {
 ActivityCompat.requestPermissions(MainActivity.this,
 new String[] {Manifest.permission.ACCESS_COARSE_LOCATION,
 Manifest.permission.ACCESS_FINE_LOCATION}, 123);
 }
 smFragment=(SupportMapFragment) getSupportFragmentManager().
 findFragmentById(R.id.fragment);
 smFragment.getMapAsync(new OnMapReadyCallback() {
 @Override
 public void onMapReady(final GoogleMap googleMap) {
 final LocationManager lManager=(LocationManager)
 getSystemService(Context.LOCATION_SERVICE);

lManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

lManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,
 1000, 1, new LocationListener() {
 @Override
 public void onLocationChanged(Location location) {
 double lati=location.getLatitude();
 double longi=location.getLongitude();
 latitude.setText(String.valueOf(lati));
 longitude.setText(String.valueOf(longi));
 MarkerOptions mOption=new MarkerOptions();
 mOption.position(new LatLng(lati, longi));
 mOption.icon(BitmapDescriptorFactory.fromResource(R.drawable.car));
 mOption.title("Simha-9000666090");
 googleMap.addMarker(mOption);
 googleMap.animateCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(lati, longi),15f));
// googleMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);
 }
 @Override
public void onStatusChanged(String provider, int status, Bundle extras) {
 }
 @Override
 public void onProviderEnabled(String provider) {
 }
 @Override
 public void onProviderDisabled(String provider) {
 }
 });
 }
 });
 }
}
android